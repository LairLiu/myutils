var lka;(function(lka){class system{static isWeixin(){var ua=navigator.userAgent.toLowerCase();if(String(ua.match(/MicroMessenger/i))=="micromessenger"){return true}else{return false}}static systemIsiOS(){let u=navigator.userAgent;let isAndroid=u.indexOf('Android')>-1||u.indexOf('Adr')>-1;let isiOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);console.log("system is :",isiOS?"ios":"android");let result=isiOS?true:false;return result}}lka.system=system})(lka||(lka={}));var lka;(function(lka){class video{constructor(videoSrc,jsSrc,endFunc,top,left,width,height){var jsmpeg=document.createElement("script");jsmpeg.type="text/javascript";jsmpeg.src=jsSrc||"./src/lka/media/jsmpeg.min.js";document.body.appendChild(jsmpeg);this.videoSrc=videoSrc;this.top=top||"0";this.left=left||"0";this.width=width||"100%";this.height=height||"100%";this.endFunc=endFunc||function endFunc(){console.log("video is play end")};lka.system.systemIsiOS?this.createIosVideo():this.createAndroidVideo()}createIosVideo(){let video1=new HTMLVideoElement();video1.src=this.videoSrc+".mp4";video1.poster=this.videoSrc+".jpg";video1.style.top=this.top;video1.style.left=this.left;video1.style.width=this.width;video1.style.height=this.height;video1.style.position="absolute";video1.style.zIndex="99";video1.onended=this.endFunc();if(lka.system.isWeixin()){video1.setAttribute("webkit-playsinline","true");video1.setAttribute("playsinline","true");video1.setAttribute("preload","auto");video1.setAttribute("x5-video-player-type","h5");video1.setAttribute("x5-video-player-fullscreen","true");video1.setAttribute("x5-video-orientation","portraint")}document.body.appendChild(video1);video.videoObj=video1;video.video=video1}createAndroidVideo(){if(!lka.system.isWeixin()){this.createIosVideo();return}let canvas=new HTMLCanvasElement();canvas.style.top=this.top;canvas.style.left=this.left;canvas.style.widows=this.width;canvas.style.height=this.height;canvas.style.position="absolute";canvas.style.zIndex="99";video.canvasObj=canvas;let player=new window['JSMpeg'].Player(this.videoSrc+".ts",{canvas:canvas,onPlayEnd:this.endFunc,autoplay:false,audio:true,chunkSize:0.5*1024*1024,disableGl:true});video.video=player}static play(){video.video.play()}static pause(){video.video.pause()}static stop(hide){video.video.currentTime=0;video.pause();if(hide)video.video.hide()}set volume(v){video.video.volume=v}get volume(){return video.video.volume}set currentTime(v){video.video.currentTime=v}get currentTime(){return video.video.currentTime}static show(){if(video.canvasObj)video.canvasObj.style.display="block";if(video.videoObj)video.videoObj.style.display="block"}static hide(){if(video.canvasObj)video.canvasObj.style.display="none";if(video.videoObj)video.videoObj.style.display="none"}}lka.video=video})(lka||(lka={}));